

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">

  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>Cube Helper Tutorial: A Walkthrough Guide &mdash; Cube Helper v1.0.5 documentation</title>















  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />


  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">


  <div class="wy-grid-for-nav">


    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">



            <a href="index.html" class="icon icon-home"> Cube Helper



          </a>







<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>


        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">






              <!-- Local TOC -->
              <div class="local-toc"><ul>

<li><a class="reference internal" href="index.html#">Welcome to Cube Helper’s documentation!</a></li>
<li><a class="reference internal" href="index.html#indices-and-tables">Indices and tables</a></li>
<li><a class="reference internal" href="#">Cube Helper Tutorial: A Walkthrough Guide</a></li>
<li><a class="reference internal" href="genindex.html#">Index</a></li>
<li><a class="reference internal" href="modules.html#">Modules</a><ul>
<li><a class="reference internal" href="cube_helper.html#">cube_helper package</a></li>
<li><a class="reference internal" href="cube_helper.html#submodules">Submodules</a></li>
<li><a class="reference internal" href="cube_helper.html#module-cube_helper.cube_equaliser">cube_helper.cube_equaliser module</a></li>
<li><a class="reference internal" href="cube_helper.html#module-cube_helper.cube_help">cube_helper.cube_help module</a></li>
<li><a class="reference internal" href="cube_helper.html#module-cube_helper.cube_loader">cube_helper.cube_loader module</a></li>
<li><a class="reference internal" href="cube_helper.html#module-cube_helper">Module contents</a></li>
</ul>
</li>
</ul>
</div>


        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">


      <nav class="wy-nav-top" aria-label="top navigation">

          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Cube Helper</a>

      </nav>


      <div class="wy-nav-content">

        <div class="rst-content">

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">

      <li><a href="index.html">Docs</a> &raquo;</li>

      <li>cube_helper: Refractored</li>


      <li class="wy-breadcrumbs-aside">



              <a href="https://github.com/MetOffice/cube_helper/blob/master/docs/source/cube_helper_tutorial.rst" class="fa fa-github"> Edit on GitHub</a>



      </li>

  </ul>


  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">

  <div class="section" id="cube-helper-refractored">
<h1>cube_helper: Refractored<a class="headerlink" href="#cube-helper-refractored" title="Permalink to this headline">¶</a></h1>
<p>This tutorial is a step by step guide to using the <code class="docutils literal notranslate"><span class="pre">cube_helper</span></code>
module. The functionality of <code class="docutils literal notranslate"><span class="pre">cube_helper</span></code> is abstracted and hidden
from the user. Start by pointing your python Environment to the new
<code class="docutils literal notranslate"><span class="pre">cube_helper</span></code> module:</p>
<div class="code ipython3 highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">sys</span>
<span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;/net/home/h01/jbedwell/Downloads/cube_helper&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Next, import the new <code class="docutils literal notranslate"><span class="pre">cube_helper</span></code> methods. Documentation will become
available but for now start by importing <code class="docutils literal notranslate"><span class="pre">cube_load</span></code>:</p>
<div class="code ipython3 highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">cube_helper</span> <span class="k">import</span> <span class="n">cube_load</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">cube_load</span></code> works by examining the cubes in the specified directory
and equalising them automatically where appropriate. Here we load a
HadGem3 model, and <code class="docutils literal notranslate"><span class="pre">cube_load</span></code> takes care of the rest:</p>
<div class="code ipython3 highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cube</span> <span class="o">=</span> <span class="n">cube_load</span><span class="p">(</span><span class="s1">&#39;/project/champ/data/CMIP6/CMIP/MOHC/HadGEM3-GC31-LL/piControl/r1i1p1f1/Amon/tasmin/gn/v20190628&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">/</span><span class="n">opt</span><span class="o">/</span><span class="n">scitools</span><span class="o">/</span><span class="n">environments</span><span class="o">/</span><span class="n">default</span><span class="o">/</span><span class="n">current</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">python3</span><span class="o">.</span><span class="mi">6</span><span class="o">/</span><span class="n">site</span><span class="o">-</span><span class="n">packages</span><span class="o">/</span><span class="n">iris</span><span class="o">/</span><span class="n">fileformats</span><span class="o">/</span><span class="n">cf</span><span class="o">.</span><span class="n">py</span><span class="p">:</span><span class="mi">798</span><span class="p">:</span> <span class="ne">UserWarning</span><span class="p">:</span> <span class="n">Missing</span> <span class="n">CF</span><span class="o">-</span><span class="n">netCDF</span> <span class="n">measure</span> <span class="n">variable</span> <span class="s1">&#39;areacella&#39;</span><span class="p">,</span> <span class="n">referenced</span> <span class="n">by</span> <span class="n">netCDF</span> <span class="n">variable</span> <span class="s1">&#39;tasmin&#39;</span>
  <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="n">message</span> <span class="o">%</span> <span class="p">(</span><span class="n">variable_name</span><span class="p">,</span> <span class="n">nc_var_name</span><span class="p">))</span>
<span class="o">/</span><span class="n">opt</span><span class="o">/</span><span class="n">scitools</span><span class="o">/</span><span class="n">environments</span><span class="o">/</span><span class="n">default</span><span class="o">/</span><span class="n">current</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">python3</span><span class="o">.</span><span class="mi">6</span><span class="o">/</span><span class="n">site</span><span class="o">-</span><span class="n">packages</span><span class="o">/</span><span class="n">iris</span><span class="o">/</span><span class="n">fileformats</span><span class="o">/</span><span class="n">cf</span><span class="o">.</span><span class="n">py</span><span class="p">:</span><span class="mi">798</span><span class="p">:</span> <span class="ne">UserWarning</span><span class="p">:</span> <span class="n">Missing</span> <span class="n">CF</span><span class="o">-</span><span class="n">netCDF</span> <span class="n">measure</span> <span class="n">variable</span> <span class="s1">&#39;areacella&#39;</span><span class="p">,</span> <span class="n">referenced</span> <span class="n">by</span> <span class="n">netCDF</span> <span class="n">variable</span> <span class="s1">&#39;tasmin&#39;</span>
  <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="n">message</span> <span class="o">%</span> <span class="p">(</span><span class="n">variable_name</span><span class="p">,</span> <span class="n">nc_var_name</span><span class="p">))</span>
<span class="o">/</span><span class="n">opt</span><span class="o">/</span><span class="n">scitools</span><span class="o">/</span><span class="n">environments</span><span class="o">/</span><span class="n">default</span><span class="o">/</span><span class="n">current</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">python3</span><span class="o">.</span><span class="mi">6</span><span class="o">/</span><span class="n">site</span><span class="o">-</span><span class="n">packages</span><span class="o">/</span><span class="n">iris</span><span class="o">/</span><span class="n">fileformats</span><span class="o">/</span><span class="n">cf</span><span class="o">.</span><span class="n">py</span><span class="p">:</span><span class="mi">798</span><span class="p">:</span> <span class="ne">UserWarning</span><span class="p">:</span> <span class="n">Missing</span> <span class="n">CF</span><span class="o">-</span><span class="n">netCDF</span> <span class="n">measure</span> <span class="n">variable</span> <span class="s1">&#39;areacella&#39;</span><span class="p">,</span> <span class="n">referenced</span> <span class="n">by</span> <span class="n">netCDF</span> <span class="n">variable</span> <span class="s1">&#39;tasmin&#39;</span>
  <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="n">message</span> <span class="o">%</span> <span class="p">(</span><span class="n">variable_name</span><span class="p">,</span> <span class="n">nc_var_name</span><span class="p">))</span>
<span class="o">/</span><span class="n">opt</span><span class="o">/</span><span class="n">scitools</span><span class="o">/</span><span class="n">environments</span><span class="o">/</span><span class="n">default</span><span class="o">/</span><span class="n">current</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">python3</span><span class="o">.</span><span class="mi">6</span><span class="o">/</span><span class="n">site</span><span class="o">-</span><span class="n">packages</span><span class="o">/</span><span class="n">iris</span><span class="o">/</span><span class="n">fileformats</span><span class="o">/</span><span class="n">cf</span><span class="o">.</span><span class="n">py</span><span class="p">:</span><span class="mi">798</span><span class="p">:</span> <span class="ne">UserWarning</span><span class="p">:</span> <span class="n">Missing</span> <span class="n">CF</span><span class="o">-</span><span class="n">netCDF</span> <span class="n">measure</span> <span class="n">variable</span> <span class="s1">&#39;areacella&#39;</span><span class="p">,</span> <span class="n">referenced</span> <span class="n">by</span> <span class="n">netCDF</span> <span class="n">variable</span> <span class="s1">&#39;tasmin&#39;</span>
  <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="n">message</span> <span class="o">%</span> <span class="p">(</span><span class="n">variable_name</span><span class="p">,</span> <span class="n">nc_var_name</span><span class="p">))</span>
<span class="o">/</span><span class="n">opt</span><span class="o">/</span><span class="n">scitools</span><span class="o">/</span><span class="n">environments</span><span class="o">/</span><span class="n">default</span><span class="o">/</span><span class="n">current</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">python3</span><span class="o">.</span><span class="mi">6</span><span class="o">/</span><span class="n">site</span><span class="o">-</span><span class="n">packages</span><span class="o">/</span><span class="n">iris</span><span class="o">/</span><span class="n">fileformats</span><span class="o">/</span><span class="n">cf</span><span class="o">.</span><span class="n">py</span><span class="p">:</span><span class="mi">798</span><span class="p">:</span> <span class="ne">UserWarning</span><span class="p">:</span> <span class="n">Missing</span> <span class="n">CF</span><span class="o">-</span><span class="n">netCDF</span> <span class="n">measure</span> <span class="n">variable</span> <span class="s1">&#39;areacella&#39;</span><span class="p">,</span> <span class="n">referenced</span> <span class="n">by</span> <span class="n">netCDF</span> <span class="n">variable</span> <span class="s1">&#39;tasmin&#39;</span>
  <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="n">message</span> <span class="o">%</span> <span class="p">(</span><span class="n">variable_name</span><span class="p">,</span> <span class="n">nc_var_name</span><span class="p">))</span>
<span class="o">/</span><span class="n">opt</span><span class="o">/</span><span class="n">scitools</span><span class="o">/</span><span class="n">environments</span><span class="o">/</span><span class="n">default</span><span class="o">/</span><span class="n">current</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">python3</span><span class="o">.</span><span class="mi">6</span><span class="o">/</span><span class="n">site</span><span class="o">-</span><span class="n">packages</span><span class="o">/</span><span class="n">iris</span><span class="o">/</span><span class="n">fileformats</span><span class="o">/</span><span class="n">cf</span><span class="o">.</span><span class="n">py</span><span class="p">:</span><span class="mi">798</span><span class="p">:</span> <span class="ne">UserWarning</span><span class="p">:</span> <span class="n">Missing</span> <span class="n">CF</span><span class="o">-</span><span class="n">netCDF</span> <span class="n">measure</span> <span class="n">variable</span> <span class="s1">&#39;areacella&#39;</span><span class="p">,</span> <span class="n">referenced</span> <span class="n">by</span> <span class="n">netCDF</span> <span class="n">variable</span> <span class="s1">&#39;tasmin&#39;</span>
  <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="n">message</span> <span class="o">%</span> <span class="p">(</span><span class="n">variable_name</span><span class="p">,</span> <span class="n">nc_var_name</span><span class="p">))</span>
<span class="o">/</span><span class="n">opt</span><span class="o">/</span><span class="n">scitools</span><span class="o">/</span><span class="n">environments</span><span class="o">/</span><span class="n">default</span><span class="o">/</span><span class="n">current</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">python3</span><span class="o">.</span><span class="mi">6</span><span class="o">/</span><span class="n">site</span><span class="o">-</span><span class="n">packages</span><span class="o">/</span><span class="n">iris</span><span class="o">/</span><span class="n">fileformats</span><span class="o">/</span><span class="n">cf</span><span class="o">.</span><span class="n">py</span><span class="p">:</span><span class="mi">798</span><span class="p">:</span> <span class="ne">UserWarning</span><span class="p">:</span> <span class="n">Missing</span> <span class="n">CF</span><span class="o">-</span><span class="n">netCDF</span> <span class="n">measure</span> <span class="n">variable</span> <span class="s1">&#39;areacella&#39;</span><span class="p">,</span> <span class="n">referenced</span> <span class="n">by</span> <span class="n">netCDF</span> <span class="n">variable</span> <span class="s1">&#39;tasmin&#39;</span>
  <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="n">message</span> <span class="o">%</span> <span class="p">(</span><span class="n">variable_name</span><span class="p">,</span> <span class="n">nc_var_name</span><span class="p">))</span>
<span class="o">/</span><span class="n">opt</span><span class="o">/</span><span class="n">scitools</span><span class="o">/</span><span class="n">environments</span><span class="o">/</span><span class="n">default</span><span class="o">/</span><span class="n">current</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">python3</span><span class="o">.</span><span class="mi">6</span><span class="o">/</span><span class="n">site</span><span class="o">-</span><span class="n">packages</span><span class="o">/</span><span class="n">iris</span><span class="o">/</span><span class="n">fileformats</span><span class="o">/</span><span class="n">cf</span><span class="o">.</span><span class="n">py</span><span class="p">:</span><span class="mi">798</span><span class="p">:</span> <span class="ne">UserWarning</span><span class="p">:</span> <span class="n">Missing</span> <span class="n">CF</span><span class="o">-</span><span class="n">netCDF</span> <span class="n">measure</span> <span class="n">variable</span> <span class="s1">&#39;areacella&#39;</span><span class="p">,</span> <span class="n">referenced</span> <span class="n">by</span> <span class="n">netCDF</span> <span class="n">variable</span> <span class="s1">&#39;tasmin&#39;</span>
  <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="n">message</span> <span class="o">%</span> <span class="p">(</span><span class="n">variable_name</span><span class="p">,</span> <span class="n">nc_var_name</span><span class="p">))</span>
<span class="o">/</span><span class="n">opt</span><span class="o">/</span><span class="n">scitools</span><span class="o">/</span><span class="n">environments</span><span class="o">/</span><span class="n">default</span><span class="o">/</span><span class="n">current</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">python3</span><span class="o">.</span><span class="mi">6</span><span class="o">/</span><span class="n">site</span><span class="o">-</span><span class="n">packages</span><span class="o">/</span><span class="n">iris</span><span class="o">/</span><span class="n">fileformats</span><span class="o">/</span><span class="n">cf</span><span class="o">.</span><span class="n">py</span><span class="p">:</span><span class="mi">798</span><span class="p">:</span> <span class="ne">UserWarning</span><span class="p">:</span> <span class="n">Missing</span> <span class="n">CF</span><span class="o">-</span><span class="n">netCDF</span> <span class="n">measure</span> <span class="n">variable</span> <span class="s1">&#39;areacella&#39;</span><span class="p">,</span> <span class="n">referenced</span> <span class="n">by</span> <span class="n">netCDF</span> <span class="n">variable</span> <span class="s1">&#39;tasmin&#39;</span>
  <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="n">message</span> <span class="o">%</span> <span class="p">(</span><span class="n">variable_name</span><span class="p">,</span> <span class="n">nc_var_name</span><span class="p">))</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cube</span> <span class="n">dim</span> <span class="n">coordinates</span> <span class="n">differ</span><span class="p">:</span>

    <span class="n">longitude</span> <span class="n">coords</span> <span class="n">inconsistent</span>

    <span class="n">latitude</span> <span class="n">coords</span> <span class="n">inconsistent</span>

<span class="n">cube</span> <span class="n">attributes</span> <span class="n">differ</span><span class="p">:</span>

    <span class="n">creation_date</span> <span class="n">attribute</span> <span class="n">inconsistent</span>

    <span class="n">history</span> <span class="n">attribute</span> <span class="n">inconsistent</span>

    <span class="n">tracking_id</span> <span class="n">attribute</span> <span class="n">inconsistent</span>

<span class="n">Deleting</span> <span class="n">creation_date</span> <span class="n">attribute</span> <span class="kn">from</span> <span class="nn">cubes</span>

<span class="n">Deleting</span> <span class="n">history</span> <span class="n">attribute</span> <span class="kn">from</span> <span class="nn">cubes</span>

<span class="n">Deleting</span> <span class="n">tracking_id</span> <span class="n">attribute</span> <span class="kn">from</span> <span class="nn">cubes</span>

<span class="n">New</span> <span class="n">time</span> <span class="n">origin</span> <span class="nb">set</span> <span class="n">to</span> <span class="n">days</span> <span class="n">since</span> <span class="mi">1850</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">01</span>

<span class="n">New</span> <span class="n">time</span> <span class="n">calender</span> <span class="nb">set</span> <span class="n">to</span> <span class="mi">360</span><span class="n">_day</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">/</span><span class="n">opt</span><span class="o">/</span><span class="n">scitools</span><span class="o">/</span><span class="n">environments</span><span class="o">/</span><span class="n">default</span><span class="o">/</span><span class="n">current</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">python3</span><span class="o">.</span><span class="mi">6</span><span class="o">/</span><span class="n">site</span><span class="o">-</span><span class="n">packages</span><span class="o">/</span><span class="n">iris</span><span class="o">/</span><span class="n">fileformats</span><span class="o">/</span><span class="n">cf</span><span class="o">.</span><span class="n">py</span><span class="p">:</span><span class="mi">798</span><span class="p">:</span> <span class="ne">UserWarning</span><span class="p">:</span> <span class="n">Missing</span> <span class="n">CF</span><span class="o">-</span><span class="n">netCDF</span> <span class="n">measure</span> <span class="n">variable</span> <span class="s1">&#39;areacella&#39;</span><span class="p">,</span> <span class="n">referenced</span> <span class="n">by</span> <span class="n">netCDF</span> <span class="n">variable</span> <span class="s1">&#39;tasmin&#39;</span>
  <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="n">message</span> <span class="o">%</span> <span class="p">(</span><span class="n">variable_name</span><span class="p">,</span> <span class="n">nc_var_name</span><span class="p">))</span>
</pre></div>
</div>
<p>Here we see some output describing the process it’s gong through. The
first statement states the attributes differ, it therefor deletes the
uncommon attributes across the cubes. This then returns a concatenated
iris cube:</p>
<div class="code ipython3 highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">cube</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">air_temperature</span> <span class="o">/</span> <span class="p">(</span><span class="n">K</span><span class="p">)</span>               <span class="p">(</span><span class="n">time</span><span class="p">:</span> <span class="mi">6000</span><span class="p">;</span> <span class="n">latitude</span><span class="p">:</span> <span class="mi">144</span><span class="p">;</span> <span class="n">longitude</span><span class="p">:</span> <span class="mi">192</span><span class="p">)</span>
     <span class="n">Dimension</span> <span class="n">coordinates</span><span class="p">:</span>
          <span class="n">time</span>                           <span class="n">x</span>               <span class="o">-</span>               <span class="o">-</span>
          <span class="n">latitude</span>                       <span class="o">-</span>               <span class="n">x</span>               <span class="o">-</span>
          <span class="n">longitude</span>                      <span class="o">-</span>               <span class="o">-</span>               <span class="n">x</span>
     <span class="n">Scalar</span> <span class="n">coordinates</span><span class="p">:</span>
          <span class="n">height</span><span class="p">:</span> <span class="mf">1.5</span> <span class="n">m</span>
     <span class="n">Attributes</span><span class="p">:</span>
          <span class="n">Conventions</span><span class="p">:</span> <span class="n">CF</span><span class="o">-</span><span class="mf">1.7</span> <span class="n">CMIP</span><span class="o">-</span><span class="mf">6.2</span>
          <span class="n">activity_id</span><span class="p">:</span> <span class="n">CMIP</span>
          <span class="n">branch_method</span><span class="p">:</span> <span class="n">standard</span>
          <span class="n">branch_time_in_child</span><span class="p">:</span> <span class="mf">0.0</span>
          <span class="n">branch_time_in_parent</span><span class="p">:</span> <span class="mf">267840.0</span>
          <span class="n">cmor_version</span><span class="p">:</span> <span class="mf">3.4</span><span class="o">.</span><span class="mi">0</span>
          <span class="n">comment</span><span class="p">:</span> <span class="n">minimum</span> <span class="n">near</span><span class="o">-</span><span class="n">surface</span> <span class="p">(</span><span class="n">usually</span><span class="p">,</span> <span class="mi">2</span> <span class="n">meter</span><span class="p">)</span> <span class="n">air</span> <span class="n">temperature</span> <span class="p">(</span><span class="n">add</span> <span class="n">cell_method</span><span class="o">...</span>
          <span class="n">cv_version</span><span class="p">:</span> <span class="mf">6.2</span><span class="o">.</span><span class="mf">20.1</span>
          <span class="n">data_specs_version</span><span class="p">:</span> <span class="mf">01.00</span><span class="o">.</span><span class="mi">29</span>
          <span class="n">experiment</span><span class="p">:</span> <span class="n">pre</span><span class="o">-</span><span class="n">industrial</span> <span class="n">control</span>
          <span class="n">experiment_id</span><span class="p">:</span> <span class="n">piControl</span>
          <span class="n">external_variables</span><span class="p">:</span> <span class="n">areacella</span>
          <span class="n">forcing_index</span><span class="p">:</span> <span class="mi">1</span>
          <span class="n">frequency</span><span class="p">:</span> <span class="n">mon</span>
          <span class="n">further_info_url</span><span class="p">:</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">furtherinfo</span><span class="o">.</span><span class="n">es</span><span class="o">-</span><span class="n">doc</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="n">CMIP6</span><span class="o">.</span><span class="n">MOHC</span><span class="o">.</span><span class="n">HadGEM3</span><span class="o">-</span><span class="n">GC31</span><span class="o">-</span><span class="n">LL</span><span class="o">.</span><span class="n">piControl</span><span class="o">.</span><span class="n">no</span><span class="o">...</span>
          <span class="n">grid</span><span class="p">:</span> <span class="n">Native</span> <span class="n">N96</span> <span class="n">grid</span><span class="p">;</span> <span class="mi">192</span> <span class="n">x</span> <span class="mi">144</span> <span class="n">longitude</span><span class="o">/</span><span class="n">latitude</span>
          <span class="n">grid_label</span><span class="p">:</span> <span class="n">gn</span>
          <span class="n">initialization_index</span><span class="p">:</span> <span class="mi">1</span>
          <span class="n">institution</span><span class="p">:</span> <span class="n">Met</span> <span class="n">Office</span> <span class="n">Hadley</span> <span class="n">Centre</span><span class="p">,</span> <span class="n">Fitzroy</span> <span class="n">Road</span><span class="p">,</span> <span class="n">Exeter</span><span class="p">,</span> <span class="n">Devon</span><span class="p">,</span> <span class="n">EX1</span> <span class="mi">3</span><span class="n">PB</span><span class="p">,</span> <span class="n">UK</span>
          <span class="n">institution_id</span><span class="p">:</span> <span class="n">MOHC</span>
          <span class="n">license</span><span class="p">:</span> <span class="n">CMIP6</span> <span class="n">model</span> <span class="n">data</span> <span class="n">produced</span> <span class="n">by</span> <span class="n">the</span> <span class="n">Met</span> <span class="n">Office</span> <span class="n">Hadley</span> <span class="n">Centre</span> <span class="ow">is</span> <span class="n">licensed</span> <span class="n">under</span><span class="o">...</span>
          <span class="n">mip_era</span><span class="p">:</span> <span class="n">CMIP6</span>
          <span class="n">mo_runid</span><span class="p">:</span> <span class="n">u</span><span class="o">-</span><span class="n">ar766</span>
          <span class="n">nominal_resolution</span><span class="p">:</span> <span class="mi">250</span> <span class="n">km</span>
          <span class="n">original_name</span><span class="p">:</span> <span class="n">mo</span><span class="p">:</span> <span class="n">mon_mean_from_day</span><span class="p">((</span><span class="n">stash</span><span class="p">:</span> <span class="n">m01s03i236</span><span class="p">,</span> <span class="n">lbproc</span><span class="p">:</span> <span class="mi">4096</span><span class="p">))</span>
          <span class="n">parent_activity_id</span><span class="p">:</span> <span class="n">CMIP</span>
          <span class="n">parent_experiment_id</span><span class="p">:</span> <span class="n">piControl</span><span class="o">-</span><span class="n">spinup</span>
          <span class="n">parent_mip_era</span><span class="p">:</span> <span class="n">CMIP6</span>
          <span class="n">parent_source_id</span><span class="p">:</span> <span class="n">HadGEM3</span><span class="o">-</span><span class="n">GC31</span><span class="o">-</span><span class="n">LL</span>
          <span class="n">parent_time_units</span><span class="p">:</span> <span class="n">days</span> <span class="n">since</span> <span class="mi">1850</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">00</span><span class="o">-</span><span class="mi">00</span><span class="o">-</span><span class="mi">00</span>
          <span class="n">parent_variant_label</span><span class="p">:</span> <span class="n">r1i1p1f1</span>
          <span class="n">physics_index</span><span class="p">:</span> <span class="mi">1</span>
          <span class="n">product</span><span class="p">:</span> <span class="n">model</span><span class="o">-</span><span class="n">output</span>
          <span class="n">realization_index</span><span class="p">:</span> <span class="mi">1</span>
          <span class="n">realm</span><span class="p">:</span> <span class="n">atmos</span>
          <span class="n">source</span><span class="p">:</span> <span class="n">HadGEM3</span><span class="o">-</span><span class="n">GC31</span><span class="o">-</span><span class="n">LL</span> <span class="p">(</span><span class="mi">2016</span><span class="p">):</span>
<span class="n">aerosol</span><span class="p">:</span> <span class="n">UKCA</span><span class="o">-</span><span class="n">GLOMAP</span><span class="o">-</span><span class="n">mode</span>
<span class="n">atmos</span><span class="p">:</span> <span class="n">MetUM</span><span class="o">-</span><span class="n">HadGEM3</span><span class="o">-</span><span class="n">GA7</span><span class="o">.</span><span class="mf">1.</span><span class="o">..</span>
          <span class="n">source_id</span><span class="p">:</span> <span class="n">HadGEM3</span><span class="o">-</span><span class="n">GC31</span><span class="o">-</span><span class="n">LL</span>
          <span class="n">source_type</span><span class="p">:</span> <span class="n">AOGCM</span> <span class="n">AER</span>
          <span class="n">sub_experiment</span><span class="p">:</span> <span class="n">none</span>
          <span class="n">sub_experiment_id</span><span class="p">:</span> <span class="n">none</span>
          <span class="n">table_id</span><span class="p">:</span> <span class="n">Amon</span>
          <span class="n">table_info</span><span class="p">:</span> <span class="n">Creation</span> <span class="n">Date</span><span class="p">:(</span><span class="mi">13</span> <span class="n">December</span> <span class="mi">2018</span><span class="p">)</span> <span class="n">MD5</span><span class="p">:</span><span class="mi">2</span><span class="n">b12b5db6db112aa8b8b0d6c1645b121</span>
          <span class="n">title</span><span class="p">:</span> <span class="n">HadGEM3</span><span class="o">-</span><span class="n">GC31</span><span class="o">-</span><span class="n">LL</span> <span class="n">output</span> <span class="n">prepared</span> <span class="k">for</span> <span class="n">CMIP6</span>
          <span class="n">variable_id</span><span class="p">:</span> <span class="n">tasmin</span>
          <span class="n">variant_label</span><span class="p">:</span> <span class="n">r1i1p1f1</span>
     <span class="n">Cell</span> <span class="n">methods</span><span class="p">:</span>
          <span class="n">mean</span><span class="p">:</span> <span class="n">area</span>
          <span class="n">minimum</span> <span class="n">within</span> <span class="n">days</span><span class="p">:</span> <span class="n">time</span>
          <span class="n">mean</span> <span class="n">over</span> <span class="n">days</span><span class="p">:</span> <span class="n">time</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">cube_helper</span></code> can also still load from a list of files:</p>
<div class="code ipython3 highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">glob</span>
<span class="n">filenames</span> <span class="o">=</span> <span class="n">glob</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="s1">&#39;/net/home/h03/frpt/EC-EARTH_rcp85/*.nc&#39;</span><span class="p">)</span>
<span class="n">filenames_2</span> <span class="o">=</span> <span class="n">glob</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="s1">&#39;/project/champ/data/cmip5/output1/ICHEC/EC-EARTH/historical/mon/atmos/Amon/r1i1p1/v20131231/tas/*.nc&#39;</span><span class="p">)</span>
<span class="n">filenames</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">filenames_2</span><span class="p">)</span>
</pre></div>
</div>
<div class="code ipython3 highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cube</span> <span class="o">=</span> <span class="n">cube_load</span><span class="p">(</span><span class="n">filenames</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cube</span> <span class="n">dim</span> <span class="n">coordinates</span> <span class="n">differ</span><span class="p">:</span>

    <span class="n">longitude</span> <span class="n">coords</span> <span class="n">inconsistent</span>

    <span class="n">time</span> <span class="n">coords</span> <span class="n">inconsistent</span>

    <span class="n">latitude</span> <span class="n">coords</span> <span class="n">inconsistent</span>

<span class="n">cube</span> <span class="n">attributes</span> <span class="n">differ</span><span class="p">:</span>

    <span class="n">history</span> <span class="n">attribute</span> <span class="n">inconsistent</span>

    <span class="n">experiment_id</span> <span class="n">attribute</span> <span class="n">inconsistent</span>

    <span class="n">parent_experiment_id</span> <span class="n">attribute</span> <span class="n">inconsistent</span>

    <span class="n">branch_time</span> <span class="n">attribute</span> <span class="n">inconsistent</span>

    <span class="n">tracking_id</span> <span class="n">attribute</span> <span class="n">inconsistent</span>

    <span class="n">experiment</span> <span class="n">attribute</span> <span class="n">inconsistent</span>

    <span class="n">creation_date</span> <span class="n">attribute</span> <span class="n">inconsistent</span>

    <span class="n">title</span> <span class="n">attribute</span> <span class="n">inconsistent</span>

    <span class="n">parent_experiment</span> <span class="n">attribute</span> <span class="n">inconsistent</span>

    <span class="n">associated_files</span> <span class="n">attribute</span> <span class="n">inconsistent</span>

<span class="n">cube</span> <span class="n">time</span> <span class="n">coordinates</span> <span class="n">differ</span><span class="p">:</span>

    <span class="n">time</span> <span class="n">start</span> <span class="n">date</span> <span class="n">inconsistent</span>

<span class="n">Deleting</span> <span class="n">history</span> <span class="n">attribute</span> <span class="kn">from</span> <span class="nn">cubes</span>

<span class="n">Deleting</span> <span class="n">experiment_id</span> <span class="n">attribute</span> <span class="kn">from</span> <span class="nn">cubes</span>

<span class="n">Deleting</span> <span class="n">parent_experiment_id</span> <span class="n">attribute</span> <span class="kn">from</span> <span class="nn">cubes</span>

<span class="n">Deleting</span> <span class="n">branch_time</span> <span class="n">attribute</span> <span class="kn">from</span> <span class="nn">cubes</span>

<span class="n">Deleting</span> <span class="n">tracking_id</span> <span class="n">attribute</span> <span class="kn">from</span> <span class="nn">cubes</span>

<span class="n">Deleting</span> <span class="n">experiment</span> <span class="n">attribute</span> <span class="kn">from</span> <span class="nn">cubes</span>

<span class="n">Deleting</span> <span class="n">creation_date</span> <span class="n">attribute</span> <span class="kn">from</span> <span class="nn">cubes</span>

<span class="n">Deleting</span> <span class="n">title</span> <span class="n">attribute</span> <span class="kn">from</span> <span class="nn">cubes</span>

<span class="n">Deleting</span> <span class="n">parent_experiment</span> <span class="n">attribute</span> <span class="kn">from</span> <span class="nn">cubes</span>

<span class="n">Deleting</span> <span class="n">associated_files</span> <span class="n">attribute</span> <span class="kn">from</span> <span class="nn">cubes</span>

<span class="n">New</span> <span class="n">time</span> <span class="n">origin</span> <span class="nb">set</span> <span class="n">to</span> <span class="n">days</span> <span class="n">since</span> <span class="mi">1850</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">01</span> <span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span>

<span class="n">New</span> <span class="n">time</span> <span class="n">calender</span> <span class="nb">set</span> <span class="n">to</span> <span class="n">gregorian</span>
</pre></div>
</div>
<p>Here we see even more messages regarding what changes have been made to
the cube, in particular the time units it’s been converted to. A
concatenated cube is returned which we can view:</p>
<div class="code ipython3 highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">cube</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">air_temperature</span> <span class="o">/</span> <span class="p">(</span><span class="n">K</span><span class="p">)</span>               <span class="p">(</span><span class="n">time</span><span class="p">:</span> <span class="mi">2999</span><span class="p">;</span> <span class="n">latitude</span><span class="p">:</span> <span class="mi">160</span><span class="p">;</span> <span class="n">longitude</span><span class="p">:</span> <span class="mi">320</span><span class="p">)</span>
     <span class="n">Dimension</span> <span class="n">coordinates</span><span class="p">:</span>
          <span class="n">time</span>                           <span class="n">x</span>               <span class="o">-</span>               <span class="o">-</span>
          <span class="n">latitude</span>                       <span class="o">-</span>               <span class="n">x</span>               <span class="o">-</span>
          <span class="n">longitude</span>                      <span class="o">-</span>               <span class="o">-</span>               <span class="n">x</span>
     <span class="n">Attributes</span><span class="p">:</span>
          <span class="n">CDI</span><span class="p">:</span> <span class="n">Climate</span> <span class="n">Data</span> <span class="n">Interface</span> <span class="n">version</span> <span class="mf">1.4</span><span class="o">.</span><span class="mi">4</span> <span class="p">(</span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">code</span><span class="o">.</span><span class="n">zmaw</span><span class="o">.</span><span class="n">de</span><span class="o">/</span><span class="n">projects</span><span class="o">/</span><span class="n">cdi</span><span class="o">...</span>
          <span class="n">CDO</span><span class="p">:</span> <span class="n">Climate</span> <span class="n">Data</span> <span class="n">Operators</span> <span class="n">version</span> <span class="mf">1.4</span><span class="o">.</span><span class="mi">4</span> <span class="p">(</span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">code</span><span class="o">.</span><span class="n">zmaw</span><span class="o">.</span><span class="n">de</span><span class="o">/</span><span class="n">projects</span><span class="o">/</span><span class="n">cdo</span><span class="o">...</span>
          <span class="n">Conventions</span><span class="p">:</span> <span class="n">CF</span><span class="o">-</span><span class="mf">1.4</span>
          <span class="n">cmor_version</span><span class="p">:</span> <span class="mf">2.8</span><span class="o">.</span><span class="mi">0</span>
          <span class="n">comment</span><span class="p">:</span> <span class="n">Equilibrium</span> <span class="n">reached</span> <span class="n">after</span> <span class="n">preindustrial</span> <span class="n">spin</span><span class="o">-</span><span class="n">up</span> <span class="n">after</span> <span class="n">which</span> <span class="n">data</span> <span class="n">were</span> <span class="n">output</span><span class="o">...</span>
          <span class="n">contact</span><span class="p">:</span> <span class="n">Alastair</span> <span class="n">McKinstry</span> <span class="o">&lt;</span><span class="n">alastair</span><span class="o">.</span><span class="n">mckinstry</span><span class="nd">@ichec</span><span class="o">.</span><span class="n">ie</span><span class="o">&gt;</span>
          <span class="n">forcing</span><span class="p">:</span> <span class="n">Nat</span><span class="p">,</span><span class="n">Ant</span>
          <span class="n">frequency</span><span class="p">:</span> <span class="n">mon</span>
          <span class="n">grid_type</span><span class="p">:</span> <span class="n">gaussian</span>
          <span class="n">initialization_method</span><span class="p">:</span> <span class="mi">1</span>
          <span class="n">institute_id</span><span class="p">:</span> <span class="n">ICHEC</span>
          <span class="n">institution</span><span class="p">:</span> <span class="n">EC</span><span class="o">-</span><span class="n">Earth</span> <span class="p">(</span><span class="n">European</span> <span class="n">Earth</span> <span class="n">System</span> <span class="n">Model</span><span class="p">)</span>
          <span class="n">model_id</span><span class="p">:</span> <span class="n">EC</span><span class="o">-</span><span class="n">EARTH</span>
          <span class="n">modeling_realm</span><span class="p">:</span> <span class="n">atmos</span>
          <span class="n">original_name</span><span class="p">:</span> <span class="mi">2</span><span class="n">T</span>
          <span class="n">parent_experiment_rip</span><span class="p">:</span> <span class="n">r1i1p1</span>
          <span class="n">physics_version</span><span class="p">:</span> <span class="mi">1</span>
          <span class="n">product</span><span class="p">:</span> <span class="n">output</span>
          <span class="n">project_id</span><span class="p">:</span> <span class="n">CMIP5</span>
          <span class="n">realization</span><span class="p">:</span> <span class="mi">1</span>
          <span class="n">references</span><span class="p">:</span> <span class="n">Model</span> <span class="n">described</span> <span class="n">by</span> <span class="n">Hazeleger</span> <span class="n">et</span> <span class="n">al</span><span class="o">.</span> <span class="p">(</span><span class="n">Bull</span><span class="o">.</span> <span class="n">Amer</span><span class="o">.</span> <span class="n">Meteor</span><span class="o">.</span> <span class="n">Soc</span><span class="o">.</span><span class="p">,</span> <span class="mi">2010</span><span class="p">,</span> <span class="mi">91</span><span class="p">,</span><span class="o">...</span>
          <span class="n">table_id</span><span class="p">:</span> <span class="n">Table</span> <span class="n">Amon</span> <span class="p">(</span><span class="mi">26</span> <span class="n">July</span> <span class="mi">2011</span><span class="p">)</span> <span class="n">b26379e76858ab98b927917878a63d01</span>
     <span class="n">Cell</span> <span class="n">methods</span><span class="p">:</span>
          <span class="n">mean</span><span class="p">:</span> <span class="n">time</span> <span class="p">(</span><span class="mi">3</span> <span class="n">hours</span><span class="p">)</span>
</pre></div>
</div>
<p>This version of <code class="docutils literal notranslate"><span class="pre">cube_helper</span></code> will try every possible action when
trying to concatenate a cube, when it runs into a problem that is best
to solve manually, it will print out a message. We can demonstrate this
using a historical and future dataset which were found to be
incompatible:</p>
<div class="code ipython3 highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">filenames</span> <span class="o">=</span> <span class="n">glob</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="s1">&#39;/project/champ/data/cmip5/output1/ICHEC/EC-EARTH/rcp85/mon/atmos/Amon/r1i1p1/v20171115/tas/*.nc&#39;</span><span class="p">)</span>
<span class="n">filenames_2</span> <span class="o">=</span> <span class="n">glob</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="s1">&#39;/project/champ/data/cmip5/output1/ICHEC/EC-EARTH/historical/mon/atmos/Amon/r1i1p1/v20131231/tas/*.nc&#39;</span><span class="p">)</span>
<span class="n">filenames</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">filenames_2</span><span class="p">)</span>
</pre></div>
</div>
<div class="code ipython3 highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cube</span> <span class="o">=</span> <span class="n">cube_load</span><span class="p">(</span><span class="n">filenames</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">/</span><span class="n">opt</span><span class="o">/</span><span class="n">scitools</span><span class="o">/</span><span class="n">environments</span><span class="o">/</span><span class="n">default</span><span class="o">/</span><span class="n">current</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">python3</span><span class="o">.</span><span class="mi">6</span><span class="o">/</span><span class="n">site</span><span class="o">-</span><span class="n">packages</span><span class="o">/</span><span class="n">iris</span><span class="o">/</span><span class="n">fileformats</span><span class="o">/</span><span class="n">cf</span><span class="o">.</span><span class="n">py</span><span class="p">:</span><span class="mi">798</span><span class="p">:</span> <span class="ne">UserWarning</span><span class="p">:</span> <span class="n">Missing</span> <span class="n">CF</span><span class="o">-</span><span class="n">netCDF</span> <span class="n">measure</span> <span class="n">variable</span> <span class="s1">&#39;areacella&#39;</span><span class="p">,</span> <span class="n">referenced</span> <span class="n">by</span> <span class="n">netCDF</span> <span class="n">variable</span> <span class="s1">&#39;tas&#39;</span>
  <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="n">message</span> <span class="o">%</span> <span class="p">(</span><span class="n">variable_name</span><span class="p">,</span> <span class="n">nc_var_name</span><span class="p">))</span>
<span class="o">/</span><span class="n">opt</span><span class="o">/</span><span class="n">scitools</span><span class="o">/</span><span class="n">environments</span><span class="o">/</span><span class="n">default</span><span class="o">/</span><span class="n">current</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">python3</span><span class="o">.</span><span class="mi">6</span><span class="o">/</span><span class="n">site</span><span class="o">-</span><span class="n">packages</span><span class="o">/</span><span class="n">iris</span><span class="o">/</span><span class="n">fileformats</span><span class="o">/</span><span class="n">cf</span><span class="o">.</span><span class="n">py</span><span class="p">:</span><span class="mi">798</span><span class="p">:</span> <span class="ne">UserWarning</span><span class="p">:</span> <span class="n">Missing</span> <span class="n">CF</span><span class="o">-</span><span class="n">netCDF</span> <span class="n">measure</span> <span class="n">variable</span> <span class="s1">&#39;areacella&#39;</span><span class="p">,</span> <span class="n">referenced</span> <span class="n">by</span> <span class="n">netCDF</span> <span class="n">variable</span> <span class="s1">&#39;tas&#39;</span>
  <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="n">message</span> <span class="o">%</span> <span class="p">(</span><span class="n">variable_name</span><span class="p">,</span> <span class="n">nc_var_name</span><span class="p">))</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cube</span> <span class="n">aux</span> <span class="n">coordinates</span> <span class="n">differ</span><span class="p">:</span>

    <span class="n">height</span> <span class="n">coords</span> <span class="n">inconsistent</span>


<span class="n">cube</span> <span class="n">dim</span> <span class="n">coordinates</span> <span class="n">differ</span><span class="p">:</span>

    <span class="n">longitude</span> <span class="n">coords</span> <span class="n">inconsistent</span>

    <span class="n">time</span> <span class="n">coords</span> <span class="n">inconsistent</span>

    <span class="n">latitude</span> <span class="n">coords</span> <span class="n">inconsistent</span>

<span class="n">cube</span> <span class="n">attributes</span> <span class="n">differ</span><span class="p">:</span>

    <span class="n">CDI</span> <span class="n">attribute</span> <span class="n">inconsistent</span>

    <span class="n">history</span> <span class="n">attribute</span> <span class="n">inconsistent</span>

    <span class="n">experiment_id</span> <span class="n">attribute</span> <span class="n">inconsistent</span>

    <span class="n">parent_experiment_id</span> <span class="n">attribute</span> <span class="n">inconsistent</span>

    <span class="n">branch_time</span> <span class="n">attribute</span> <span class="n">inconsistent</span>

    <span class="n">tracking_id</span> <span class="n">attribute</span> <span class="n">inconsistent</span>

    <span class="n">experiment</span> <span class="n">attribute</span> <span class="n">inconsistent</span>

    <span class="n">creation_date</span> <span class="n">attribute</span> <span class="n">inconsistent</span>

    <span class="n">title</span> <span class="n">attribute</span> <span class="n">inconsistent</span>

    <span class="n">parent_experiment</span> <span class="n">attribute</span> <span class="n">inconsistent</span>

    <span class="n">CDO</span> <span class="n">attribute</span> <span class="n">inconsistent</span>

    <span class="n">associated_files</span> <span class="n">attribute</span> <span class="n">inconsistent</span>

    <span class="n">grid_type</span> <span class="n">attribute</span> <span class="n">inconsistent</span>

    <span class="n">source</span> <span class="n">attribute</span> <span class="n">inconsistent</span>

<span class="n">cube</span> <span class="n">time</span> <span class="n">coordinates</span> <span class="n">differ</span><span class="p">:</span>

    <span class="n">time</span> <span class="n">start</span> <span class="n">date</span> <span class="n">inconsistent</span>

<span class="n">Removing</span> <span class="n">height</span> <span class="n">coords</span> <span class="kn">from</span> <span class="nn">cube</span>

<span class="n">Deleting</span> <span class="n">CDI</span> <span class="n">attribute</span> <span class="kn">from</span> <span class="nn">cubes</span>

<span class="n">Deleting</span> <span class="n">history</span> <span class="n">attribute</span> <span class="kn">from</span> <span class="nn">cubes</span>

<span class="n">Deleting</span> <span class="n">experiment_id</span> <span class="n">attribute</span> <span class="kn">from</span> <span class="nn">cubes</span>

<span class="n">Deleting</span> <span class="n">parent_experiment_id</span> <span class="n">attribute</span> <span class="kn">from</span> <span class="nn">cubes</span>

<span class="n">Deleting</span> <span class="n">branch_time</span> <span class="n">attribute</span> <span class="kn">from</span> <span class="nn">cubes</span>

<span class="n">Deleting</span> <span class="n">tracking_id</span> <span class="n">attribute</span> <span class="kn">from</span> <span class="nn">cubes</span>

<span class="n">Deleting</span> <span class="n">experiment</span> <span class="n">attribute</span> <span class="kn">from</span> <span class="nn">cubes</span>

<span class="n">Deleting</span> <span class="n">creation_date</span> <span class="n">attribute</span> <span class="kn">from</span> <span class="nn">cubes</span>

<span class="n">Deleting</span> <span class="n">title</span> <span class="n">attribute</span> <span class="kn">from</span> <span class="nn">cubes</span>

<span class="n">Deleting</span> <span class="n">parent_experiment</span> <span class="n">attribute</span> <span class="kn">from</span> <span class="nn">cubes</span>

<span class="n">Deleting</span> <span class="n">CDO</span> <span class="n">attribute</span> <span class="kn">from</span> <span class="nn">cubes</span>

<span class="n">Deleting</span> <span class="n">associated_files</span> <span class="n">attribute</span> <span class="kn">from</span> <span class="nn">cubes</span>

<span class="n">Deleting</span> <span class="n">grid_type</span> <span class="n">attribute</span> <span class="kn">from</span> <span class="nn">cubes</span>

<span class="n">Deleting</span> <span class="n">source</span> <span class="n">attribute</span> <span class="kn">from</span> <span class="nn">cubes</span>

<span class="n">New</span> <span class="n">time</span> <span class="n">origin</span> <span class="nb">set</span> <span class="n">to</span> <span class="n">days</span> <span class="n">since</span> <span class="mi">1850</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">01</span> <span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span>

<span class="n">New</span> <span class="n">time</span> <span class="n">calender</span> <span class="nb">set</span> <span class="n">to</span> <span class="n">gregorian</span>


<span class="n">Oops</span><span class="p">,</span> <span class="n">there</span> <span class="n">was</span> <span class="n">an</span> <span class="n">error</span> <span class="ow">in</span> <span class="n">concatenation</span>


<span class="n">The</span> <span class="n">time</span> <span class="n">coordinates</span> <span class="n">overlap</span> <span class="n">at</span> <span class="n">cube</span> <span class="mi">15</span> <span class="ow">and</span> <span class="n">cube</span> <span class="mi">16</span>

<span class="n">These</span> <span class="n">cubes</span> <span class="n">are</span><span class="p">:</span>
    <span class="o">/</span><span class="n">project</span><span class="o">/</span><span class="n">champ</span><span class="o">/</span><span class="n">data</span><span class="o">/</span><span class="n">cmip5</span><span class="o">/</span><span class="n">output1</span><span class="o">/</span><span class="n">ICHEC</span><span class="o">/</span><span class="n">EC</span><span class="o">-</span><span class="n">EARTH</span><span class="o">/</span><span class="n">historical</span><span class="o">/</span><span class="n">mon</span><span class="o">/</span><span class="n">atmos</span><span class="o">/</span><span class="n">Amon</span><span class="o">/</span><span class="n">r1i1p1</span><span class="o">/</span><span class="n">v20131231</span><span class="o">/</span><span class="n">tas</span><span class="o">/</span><span class="n">tas_Amon_EC</span><span class="o">-</span><span class="n">EARTH_historical_r1i1p1_200001</span><span class="o">-</span><span class="mf">200911.</span><span class="n">nc</span>
    <span class="o">/</span><span class="n">project</span><span class="o">/</span><span class="n">champ</span><span class="o">/</span><span class="n">data</span><span class="o">/</span><span class="n">cmip5</span><span class="o">/</span><span class="n">output1</span><span class="o">/</span><span class="n">ICHEC</span><span class="o">/</span><span class="n">EC</span><span class="o">-</span><span class="n">EARTH</span><span class="o">/</span><span class="n">rcp85</span><span class="o">/</span><span class="n">mon</span><span class="o">/</span><span class="n">atmos</span><span class="o">/</span><span class="n">Amon</span><span class="o">/</span><span class="n">r1i1p1</span><span class="o">/</span><span class="n">v20171115</span><span class="o">/</span><span class="n">tas</span><span class="o">/</span><span class="n">tas_Amon_EC</span><span class="o">-</span><span class="n">EARTH_rcp85_r1i1p1_200601</span><span class="o">-</span><span class="mf">200912.</span><span class="n">nc</span>

<span class="n">The</span> <span class="n">time</span> <span class="n">coordinates</span> <span class="n">overlap</span> <span class="n">at</span> <span class="n">cube</span> <span class="mi">16</span> <span class="ow">and</span> <span class="n">cube</span> <span class="mi">15</span>

<span class="n">These</span> <span class="n">cubes</span> <span class="n">are</span><span class="p">:</span>
    <span class="o">/</span><span class="n">project</span><span class="o">/</span><span class="n">champ</span><span class="o">/</span><span class="n">data</span><span class="o">/</span><span class="n">cmip5</span><span class="o">/</span><span class="n">output1</span><span class="o">/</span><span class="n">ICHEC</span><span class="o">/</span><span class="n">EC</span><span class="o">-</span><span class="n">EARTH</span><span class="o">/</span><span class="n">rcp85</span><span class="o">/</span><span class="n">mon</span><span class="o">/</span><span class="n">atmos</span><span class="o">/</span><span class="n">Amon</span><span class="o">/</span><span class="n">r1i1p1</span><span class="o">/</span><span class="n">v20171115</span><span class="o">/</span><span class="n">tas</span><span class="o">/</span><span class="n">tas_Amon_EC</span><span class="o">-</span><span class="n">EARTH_rcp85_r1i1p1_200601</span><span class="o">-</span><span class="mf">200912.</span><span class="n">nc</span>
    <span class="o">/</span><span class="n">project</span><span class="o">/</span><span class="n">champ</span><span class="o">/</span><span class="n">data</span><span class="o">/</span><span class="n">cmip5</span><span class="o">/</span><span class="n">output1</span><span class="o">/</span><span class="n">ICHEC</span><span class="o">/</span><span class="n">EC</span><span class="o">-</span><span class="n">EARTH</span><span class="o">/</span><span class="n">historical</span><span class="o">/</span><span class="n">mon</span><span class="o">/</span><span class="n">atmos</span><span class="o">/</span><span class="n">Amon</span><span class="o">/</span><span class="n">r1i1p1</span><span class="o">/</span><span class="n">v20131231</span><span class="o">/</span><span class="n">tas</span><span class="o">/</span><span class="n">tas_Amon_EC</span><span class="o">-</span><span class="n">EARTH_historical_r1i1p1_200001</span><span class="o">-</span><span class="mf">200911.</span><span class="n">nc</span>
</pre></div>
</div>
<p>Here we see the time coordinates for cube 15 and 16 overlap, We can
therefore manually remove this from the list, and try again:</p>
<div class="code ipython3 highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">filenames</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="s1">&#39;/project/champ/data/cmip5/output1/ICHEC/EC-EARTH/historical/mon/atmos/Amon/r1i1p1/v20131231/tas/tas_Amon_EC-EARTH_historical_r1i1p1_200001-200911.nc&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>And then we try to load it again:</p>
<div class="code ipython3 highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cube</span> <span class="o">=</span> <span class="n">cube_load</span><span class="p">(</span><span class="n">filenames</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">/</span><span class="n">opt</span><span class="o">/</span><span class="n">scitools</span><span class="o">/</span><span class="n">environments</span><span class="o">/</span><span class="n">default</span><span class="o">/</span><span class="n">current</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">python3</span><span class="o">.</span><span class="mi">6</span><span class="o">/</span><span class="n">site</span><span class="o">-</span><span class="n">packages</span><span class="o">/</span><span class="n">iris</span><span class="o">/</span><span class="n">fileformats</span><span class="o">/</span><span class="n">cf</span><span class="o">.</span><span class="n">py</span><span class="p">:</span><span class="mi">798</span><span class="p">:</span> <span class="ne">UserWarning</span><span class="p">:</span> <span class="n">Missing</span> <span class="n">CF</span><span class="o">-</span><span class="n">netCDF</span> <span class="n">measure</span> <span class="n">variable</span> <span class="s1">&#39;areacella&#39;</span><span class="p">,</span> <span class="n">referenced</span> <span class="n">by</span> <span class="n">netCDF</span> <span class="n">variable</span> <span class="s1">&#39;tas&#39;</span>
  <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="n">message</span> <span class="o">%</span> <span class="p">(</span><span class="n">variable_name</span><span class="p">,</span> <span class="n">nc_var_name</span><span class="p">))</span>
<span class="o">/</span><span class="n">opt</span><span class="o">/</span><span class="n">scitools</span><span class="o">/</span><span class="n">environments</span><span class="o">/</span><span class="n">default</span><span class="o">/</span><span class="n">current</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">python3</span><span class="o">.</span><span class="mi">6</span><span class="o">/</span><span class="n">site</span><span class="o">-</span><span class="n">packages</span><span class="o">/</span><span class="n">iris</span><span class="o">/</span><span class="n">fileformats</span><span class="o">/</span><span class="n">cf</span><span class="o">.</span><span class="n">py</span><span class="p">:</span><span class="mi">798</span><span class="p">:</span> <span class="ne">UserWarning</span><span class="p">:</span> <span class="n">Missing</span> <span class="n">CF</span><span class="o">-</span><span class="n">netCDF</span> <span class="n">measure</span> <span class="n">variable</span> <span class="s1">&#39;areacella&#39;</span><span class="p">,</span> <span class="n">referenced</span> <span class="n">by</span> <span class="n">netCDF</span> <span class="n">variable</span> <span class="s1">&#39;tas&#39;</span>
  <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="n">message</span> <span class="o">%</span> <span class="p">(</span><span class="n">variable_name</span><span class="p">,</span> <span class="n">nc_var_name</span><span class="p">))</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cube</span> <span class="n">aux</span> <span class="n">coordinates</span> <span class="n">differ</span><span class="p">:</span>

    <span class="n">height</span> <span class="n">coords</span> <span class="n">inconsistent</span>


<span class="n">cube</span> <span class="n">dim</span> <span class="n">coordinates</span> <span class="n">differ</span><span class="p">:</span>

    <span class="n">longitude</span> <span class="n">coords</span> <span class="n">inconsistent</span>

    <span class="n">time</span> <span class="n">coords</span> <span class="n">inconsistent</span>

    <span class="n">latitude</span> <span class="n">coords</span> <span class="n">inconsistent</span>

<span class="n">cube</span> <span class="n">attributes</span> <span class="n">differ</span><span class="p">:</span>

    <span class="n">CDI</span> <span class="n">attribute</span> <span class="n">inconsistent</span>

    <span class="n">history</span> <span class="n">attribute</span> <span class="n">inconsistent</span>

    <span class="n">experiment_id</span> <span class="n">attribute</span> <span class="n">inconsistent</span>

    <span class="n">parent_experiment_id</span> <span class="n">attribute</span> <span class="n">inconsistent</span>

    <span class="n">branch_time</span> <span class="n">attribute</span> <span class="n">inconsistent</span>

    <span class="n">tracking_id</span> <span class="n">attribute</span> <span class="n">inconsistent</span>

    <span class="n">experiment</span> <span class="n">attribute</span> <span class="n">inconsistent</span>

    <span class="n">creation_date</span> <span class="n">attribute</span> <span class="n">inconsistent</span>

    <span class="n">title</span> <span class="n">attribute</span> <span class="n">inconsistent</span>

    <span class="n">parent_experiment</span> <span class="n">attribute</span> <span class="n">inconsistent</span>

    <span class="n">CDO</span> <span class="n">attribute</span> <span class="n">inconsistent</span>

    <span class="n">associated_files</span> <span class="n">attribute</span> <span class="n">inconsistent</span>

    <span class="n">grid_type</span> <span class="n">attribute</span> <span class="n">inconsistent</span>

    <span class="n">source</span> <span class="n">attribute</span> <span class="n">inconsistent</span>

<span class="n">cube</span> <span class="n">time</span> <span class="n">coordinates</span> <span class="n">differ</span><span class="p">:</span>

    <span class="n">time</span> <span class="n">start</span> <span class="n">date</span> <span class="n">inconsistent</span>

<span class="n">Removing</span> <span class="n">height</span> <span class="n">coords</span> <span class="kn">from</span> <span class="nn">cube</span>

<span class="n">Deleting</span> <span class="n">CDI</span> <span class="n">attribute</span> <span class="kn">from</span> <span class="nn">cubes</span>

<span class="n">Deleting</span> <span class="n">history</span> <span class="n">attribute</span> <span class="kn">from</span> <span class="nn">cubes</span>

<span class="n">Deleting</span> <span class="n">experiment_id</span> <span class="n">attribute</span> <span class="kn">from</span> <span class="nn">cubes</span>

<span class="n">Deleting</span> <span class="n">parent_experiment_id</span> <span class="n">attribute</span> <span class="kn">from</span> <span class="nn">cubes</span>

<span class="n">Deleting</span> <span class="n">branch_time</span> <span class="n">attribute</span> <span class="kn">from</span> <span class="nn">cubes</span>

<span class="n">Deleting</span> <span class="n">tracking_id</span> <span class="n">attribute</span> <span class="kn">from</span> <span class="nn">cubes</span>

<span class="n">Deleting</span> <span class="n">experiment</span> <span class="n">attribute</span> <span class="kn">from</span> <span class="nn">cubes</span>

<span class="n">Deleting</span> <span class="n">creation_date</span> <span class="n">attribute</span> <span class="kn">from</span> <span class="nn">cubes</span>

<span class="n">Deleting</span> <span class="n">title</span> <span class="n">attribute</span> <span class="kn">from</span> <span class="nn">cubes</span>

<span class="n">Deleting</span> <span class="n">parent_experiment</span> <span class="n">attribute</span> <span class="kn">from</span> <span class="nn">cubes</span>

<span class="n">Deleting</span> <span class="n">CDO</span> <span class="n">attribute</span> <span class="kn">from</span> <span class="nn">cubes</span>

<span class="n">Deleting</span> <span class="n">associated_files</span> <span class="n">attribute</span> <span class="kn">from</span> <span class="nn">cubes</span>

<span class="n">Deleting</span> <span class="n">grid_type</span> <span class="n">attribute</span> <span class="kn">from</span> <span class="nn">cubes</span>

<span class="n">Deleting</span> <span class="n">source</span> <span class="n">attribute</span> <span class="kn">from</span> <span class="nn">cubes</span>

<span class="n">New</span> <span class="n">time</span> <span class="n">origin</span> <span class="nb">set</span> <span class="n">to</span> <span class="n">days</span> <span class="n">since</span> <span class="mi">1850</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">01</span> <span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span>

<span class="n">New</span> <span class="n">time</span> <span class="n">calender</span> <span class="nb">set</span> <span class="n">to</span> <span class="n">gregorian</span>
</pre></div>
</div>
<p>This now seems to have worked, Lets have a look:</p>
<div class="code ipython3 highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">cube</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">air_temperature</span> <span class="o">/</span> <span class="p">(</span><span class="n">K</span><span class="p">)</span>               <span class="p">(</span><span class="n">time</span><span class="p">:</span> <span class="mi">2940</span><span class="p">;</span> <span class="n">latitude</span><span class="p">:</span> <span class="mi">160</span><span class="p">;</span> <span class="n">longitude</span><span class="p">:</span> <span class="mi">320</span><span class="p">)</span>
     <span class="n">Dimension</span> <span class="n">coordinates</span><span class="p">:</span>
          <span class="n">time</span>                           <span class="n">x</span>               <span class="o">-</span>               <span class="o">-</span>
          <span class="n">latitude</span>                       <span class="o">-</span>               <span class="n">x</span>               <span class="o">-</span>
          <span class="n">longitude</span>                      <span class="o">-</span>               <span class="o">-</span>               <span class="n">x</span>
     <span class="n">Attributes</span><span class="p">:</span>
          <span class="n">Conventions</span><span class="p">:</span> <span class="n">CF</span><span class="o">-</span><span class="mf">1.4</span>
          <span class="n">cmor_version</span><span class="p">:</span> <span class="mf">2.8</span><span class="o">.</span><span class="mi">0</span>
          <span class="n">comment</span><span class="p">:</span> <span class="n">Equilibrium</span> <span class="n">reached</span> <span class="n">after</span> <span class="n">preindustrial</span> <span class="n">spin</span><span class="o">-</span><span class="n">up</span> <span class="n">after</span> <span class="n">which</span> <span class="n">data</span> <span class="n">were</span> <span class="n">output</span><span class="o">...</span>
          <span class="n">contact</span><span class="p">:</span> <span class="n">Alastair</span> <span class="n">McKinstry</span> <span class="o">&lt;</span><span class="n">alastair</span><span class="o">.</span><span class="n">mckinstry</span><span class="nd">@ichec</span><span class="o">.</span><span class="n">ie</span><span class="o">&gt;</span>
          <span class="n">forcing</span><span class="p">:</span> <span class="n">Nat</span><span class="p">,</span><span class="n">Ant</span>
          <span class="n">frequency</span><span class="p">:</span> <span class="n">mon</span>
          <span class="n">initialization_method</span><span class="p">:</span> <span class="mi">1</span>
          <span class="n">institute_id</span><span class="p">:</span> <span class="n">ICHEC</span>
          <span class="n">institution</span><span class="p">:</span> <span class="n">EC</span><span class="o">-</span><span class="n">Earth</span> <span class="p">(</span><span class="n">European</span> <span class="n">Earth</span> <span class="n">System</span> <span class="n">Model</span><span class="p">)</span>
          <span class="n">model_id</span><span class="p">:</span> <span class="n">EC</span><span class="o">-</span><span class="n">EARTH</span>
          <span class="n">modeling_realm</span><span class="p">:</span> <span class="n">atmos</span>
          <span class="n">original_name</span><span class="p">:</span> <span class="mi">2</span><span class="n">T</span>
          <span class="n">parent_experiment_rip</span><span class="p">:</span> <span class="n">r1i1p1</span>
          <span class="n">physics_version</span><span class="p">:</span> <span class="mi">1</span>
          <span class="n">product</span><span class="p">:</span> <span class="n">output</span>
          <span class="n">project_id</span><span class="p">:</span> <span class="n">CMIP5</span>
          <span class="n">realization</span><span class="p">:</span> <span class="mi">1</span>
          <span class="n">references</span><span class="p">:</span> <span class="n">Model</span> <span class="n">described</span> <span class="n">by</span> <span class="n">Hazeleger</span> <span class="n">et</span> <span class="n">al</span><span class="o">.</span> <span class="p">(</span><span class="n">Bull</span><span class="o">.</span> <span class="n">Amer</span><span class="o">.</span> <span class="n">Meteor</span><span class="o">.</span> <span class="n">Soc</span><span class="o">.</span><span class="p">,</span> <span class="mi">2010</span><span class="p">,</span> <span class="mi">91</span><span class="p">,</span><span class="o">...</span>
          <span class="n">table_id</span><span class="p">:</span> <span class="n">Table</span> <span class="n">Amon</span> <span class="p">(</span><span class="mi">26</span> <span class="n">July</span> <span class="mi">2011</span><span class="p">)</span> <span class="n">b26379e76858ab98b927917878a63d01</span>
     <span class="n">Cell</span> <span class="n">methods</span><span class="p">:</span>
          <span class="n">mean</span><span class="p">:</span> <span class="n">time</span> <span class="p">(</span><span class="mi">3</span> <span class="n">hours</span><span class="p">)</span>
</pre></div>
</div>
<p>Success!</p>
</div>


           </div>

          </div>
          <footer>


  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, The Met Office

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.

</footer>

        </div>
      </div>

    </section>

  </div>







      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>




  <script type="text/javascript" src="_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

</body>
</html>
